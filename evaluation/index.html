<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>问诊评价报告 - 详细版</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Chart.js CDN for Radar Chart -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        /* 自定义动画效果 */
        .hover-scale {
            transition: transform 0.2s ease-in-out;
        }
        .hover-scale:hover {
            transform: scale(1.05);
        }
        
        .hover-shadow {
            transition: box-shadow 0.2s ease-in-out;
        }
        .hover-shadow:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        /* 渐变背景 */
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        /* 评分颜色标识 */
        .score-excellent { color: #10b981; }
        .score-good { color: #3b82f6; }
        .score-fair { color: #f59e0b; }
        .score-poor { color: #ef4444; }
        
        /* 平滑过渡 */
        .accordion-content {
            transition: max-height 0.3s ease-out;
            overflow: hidden;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- 头部导航 -->
    <div class="gradient-bg text-white p-4 sticky top-0 z-10 shadow-lg">
        <div class="flex items-center justify-between">
            <h1 class="text-xl font-bold flex items-center">
                <i class="fas fa-clipboard-check mr-2"></i>
                问诊评价报告
            </h1>
            <span class="text-sm opacity-90">2025-06-11</span>
        </div>
    </div>
    
    <!-- 总分卡片 -->
    <div class="p-4">
        <div class="bg-white rounded-2xl shadow-lg hover-shadow p-6 mb-4">
            <div class="text-center">
                <div class="relative inline-flex items-center justify-center w-32 h-32 mb-4">
                    <svg class="absolute w-full h-full">
                        <circle cx="64" cy="64" r="56" stroke="#e5e7eb" stroke-width="8" fill="none"></circle>
                        <circle cx="64" cy="64" r="56" stroke="#ef4444" stroke-width="8" fill="none"
                                stroke-dasharray="351.86" stroke-dashoffset="264" transform="rotate(-90 64 64)"
                                style="transition: stroke-dashoffset 1s ease-in-out;"></circle>
                    </svg>
                    <div class="absolute">
                        <span class="text-4xl font-bold text-red-500">25</span>
                        <span class="text-gray-500">/100</span>
                    </div>
                </div>
                <h2 class="text-2xl font-bold text-gray-800 mb-2">总体评分</h2>
                <div class="flex items-center justify-center mb-3">
                    <span class="bg-red-100 text-red-700 px-3 py-1 rounded-full text-sm font-medium">
                        <i class="fas fa-exclamation-circle mr-1"></i>
                        需要大幅改进
                    </span>
                </div>
                <!-- 评分等级说明 -->
                <div class="grid grid-cols-4 gap-2 mt-4 text-xs">
                    <div class="text-center">
                        <div class="w-full h-2 bg-green-500 rounded mb-1"></div>
                        <span class="text-gray-600">优秀 90-100</span>
                    </div>
                    <div class="text-center">
                        <div class="w-full h-2 bg-blue-500 rounded mb-1"></div>
                        <span class="text-gray-600">良好 70-89</span>
                    </div>
                    <div class="text-center">
                        <div class="w-full h-2 bg-yellow-500 rounded mb-1"></div>
                        <span class="text-gray-600">合格 60-69</span>
                    </div>
                    <div class="text-center">
                        <div class="w-full h-2 bg-red-500 rounded mb-1"></div>
                        <span class="text-gray-600">不合格 <60</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 雷达图卡片 -->
        <div class="bg-white rounded-2xl shadow-lg hover-shadow p-6 mb-4">
            <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                <i class="fas fa-chart-radar mr-2 text-purple-600"></i>
                能力雷达图
            </h3>
            <div class="relative h-64 mb-4">
                <canvas id="radarChart"></canvas>
            </div>
            <!-- 各项得分概览 -->
            <div class="grid grid-cols-2 gap-3 text-sm">
                <div class="flex items-center justify-between p-2 bg-gray-50 rounded">
                    <span class="text-gray-600">现病史</span>
                    <span class="font-medium score-poor">21/50</span>
                </div>
                <div class="flex items-center justify-between p-2 bg-gray-50 rounded">
                    <span class="text-gray-600">其他病史</span>
                    <span class="font-medium score-poor">4/25</span>
                </div>
                <div class="flex items-center justify-between p-2 bg-gray-50 rounded">
                    <span class="text-gray-600">问诊技巧</span>
                    <span class="font-medium score-poor">0/10</span>
                </div>
                <div class="flex items-center justify-between p-2 bg-gray-50 rounded">
                    <span class="text-gray-600">人文关怀</span>
                    <span class="font-medium score-poor">0/5</span>
                </div>
                <div class="flex items-center justify-between p-2 bg-gray-50 rounded col-span-2">
                    <span class="text-gray-600">问诊逻辑</span>
                    <span class="font-medium score-poor">0/10</span>
                </div>
            </div>
        </div>
        
        <!-- 整体评价卡片 -->
        <div class="bg-gradient-to-r from-red-50 to-orange-50 rounded-2xl shadow-lg hover-shadow p-6 mb-4">
            <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                <i class="fas fa-exclamation-triangle mr-2 text-orange-500"></i>
                整体评价
            </h3>
            <p class="text-gray-700 leading-relaxed text-sm">
                此次问诊表现欠佳。在内容上，多项关键信息未询问，如可能病因、既往病史、个人习惯等，仅部分方面有一定询问但不全面。沟通方面，初始交流、语言表达、沟通技巧等均存在严重不足，未展现尊重与同理心，缺乏对患者的关怀和专业解释。整体问诊在完整性、顺序、问题相关性及过程流畅性上都得0分，需大幅改进。
            </p>
        </div>
        
        <!-- 评分详情折叠面板 -->
        <div class="space-y-3">
            <!-- 现病史 -->
            <div class="bg-white rounded-xl shadow hover-shadow overflow-hidden">
                <button onclick="toggleAccordion('xianbingshi')" class="w-full p-4 text-left flex items-center justify-between hover-scale">
                    <div class="flex items-center">
                        <i class="fas fa-stethoscope text-blue-500 mr-3"></i>
                        <span class="font-semibold text-gray-800">现病史</span>
                    </div>
                    <div class="flex items-center">
                        <span class="text-sm font-medium text-gray-600 mr-3">21/50分 (42%)</span>
                        <i class="fas fa-chevron-down text-gray-400 transition-transform" id="xianbingshi-icon"></i>
                    </div>
                </button>
                <div id="xianbingshi" class="hidden px-4 pb-4">
                    <div class="bg-blue-50 p-3 rounded-lg mb-3">
                        <p class="text-xs text-blue-700">
                            <i class="fas fa-info-circle mr-1"></i>
                            评分标准：全面系统地询问主要症状的起病、发展、伴随症状等信息
                        </p>
                    </div>
                    <div class="space-y-3">
                        <!-- 起病日期及方式 -->
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h5 class="font-medium text-gray-800">起病日期及方式</h5>
                                    <p class="text-xs text-gray-500 mt-1">应询问具体发病时间、急性/慢性起病</p>
                                </div>
                                <span class="text-orange-500 font-bold">3/5分</span>
                            </div>
                            <div class="bg-orange-50 p-2 rounded text-xs text-gray-700">
                                <i class="fas fa-comment-dots mr-1 text-orange-500"></i>
                                评价：询问了发热持续时间，但未明确询问起病方式
                            </div>
                        </div>
                        
                        <!-- 可能病因或诱因 -->
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h5 class="font-medium text-gray-800">可能病因或诱因</h5>
                                    <p class="text-xs text-gray-500 mt-1">应询问发病前活动、接触史、诱发因素</p>
                                </div>
                                <span class="text-red-500 font-bold">0/8分</span>
                            </div>
                            <div class="bg-red-50 p-2 rounded text-xs text-gray-700">
                                <i class="fas fa-times-circle mr-1 text-red-500"></i>
                                评价：未询问可能导致发热的相关因素
                            </div>
                        </div>
                        
                        <!-- 主要症状的系统描述 -->
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h5 class="font-medium text-gray-800">主要症状的系统描述</h5>
                                    <p class="text-xs text-gray-500 mt-1">应详细描述症状性质、程度、频率等</p>
                                </div>
                                <span class="text-yellow-500 font-bold">6/10分</span>
                            </div>
                            <div class="bg-yellow-50 p-2 rounded text-xs text-gray-700">
                                <i class="fas fa-exclamation-circle mr-1 text-yellow-500"></i>
                                评价：询问了发热的温度变化和持续时间，但未详细询问发热的性质和其他特点
                            </div>
                        </div>
                        
                        <!-- 病情发展及演变 -->
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h5 class="font-medium text-gray-800">病情发展及演变</h5>
                                    <p class="text-xs text-gray-500 mt-1">应询问症状变化趋势、加重/缓解因素</p>
                                </div>
                                <span class="text-yellow-500 font-bold">5/8分</span>
                            </div>
                            <div class="bg-yellow-50 p-2 rounded text-xs text-gray-700">
                                <i class="fas fa-exclamation-circle mr-1 text-yellow-500"></i>
                                评价：询问了发热的温度变化，但未详细询问病情的发展过程
                            </div>
                        </div>
                        
                        <!-- 伴随症状 -->
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h5 class="font-medium text-gray-800">伴随症状</h5>
                                    <p class="text-xs text-gray-500 mt-1">应全面询问其他系统相关症状</p>
                                </div>
                                <span class="text-orange-500 font-bold">4/7分</span>
                            </div>
                            <div class="bg-orange-50 p-2 rounded text-xs text-gray-700">
                                <i class="fas fa-comment-dots mr-1 text-orange-500"></i>
                                评价：询问了寒战等伴随症状，但未全面询问其他可能的伴随症状
                            </div>
                        </div>
                        
                        <!-- 诊疗经过及效果 -->
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h5 class="font-medium text-gray-800">诊疗经过及效果</h5>
                                    <p class="text-xs text-gray-500 mt-1">应询问就诊史、用药史及疗效</p>
                                </div>
                                <span class="text-orange-500 font-bold">3/5分</span>
                            </div>
                            <div class="bg-orange-50 p-2 rounded text-xs text-gray-700">
                                <i class="fas fa-comment-dots mr-1 text-orange-500"></i>
                                评价：询问了自行服用退烧药的情况，但未询问其他可能的诊疗经过
                            </div>
                        </div>
                        
                        <!-- 发病后的一般状况 -->
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h5 class="font-medium text-gray-800">发病后的一般状况</h5>
                                    <p class="text-xs text-gray-500 mt-1">应询问精神、食欲、睡眠、大小便等</p>
                                </div>
                                <span class="text-red-500 font-bold">0/7分</span>
                            </div>
                            <div class="bg-red-50 p-2 rounded text-xs text-gray-700">
                                <i class="fas fa-times-circle mr-1 text-red-500"></i>
                                评价：未询问发病后的一般状况
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 其他病史 -->
            <div class="bg-white rounded-xl shadow hover-shadow overflow-hidden">
                <button onclick="toggleAccordion('qitabingshi')" class="w-full p-4 text-left flex items-center justify-between hover-scale">
                    <div class="flex items-center">
                        <i class="fas fa-file-medical text-green-500 mr-3"></i>
                        <span class="font-semibold text-gray-800">其他病史</span>
                    </div>
                    <div class="flex items-center">
                        <span class="text-sm font-medium text-gray-600 mr-3">4/25分 (16%)</span>
                        <i class="fas fa-chevron-down text-gray-400 transition-transform" id="qitabingshi-icon"></i>
                    </div>
                </button>
                <div id="qitabingshi" class="hidden px-4 pb-4">
                    <div class="bg-green-50 p-3 rounded-lg mb-3">
                        <p class="text-xs text-green-700">
                            <i class="fas fa-info-circle mr-1"></i>
                            评分标准：全面了解患者既往健康状况、生活习惯、家族遗传等信息
                        </p>
                    </div>
                    <div class="space-y-3">
                        <!-- 既往病史 -->
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h5 class="font-medium text-gray-800">既往病史</h5>
                                    <p class="text-xs text-gray-500 mt-1">应询问重要疾病史、手术史、过敏史等</p>
                                </div>
                                <span class="text-red-500 font-bold">0/8分</span>
                            </div>
                            <div class="bg-red-50 p-2 rounded text-xs text-gray-700">
                                <i class="fas fa-times-circle mr-1 text-red-500"></i>
                                评价：未询问患者既往病史相关内容
                            </div>
                        </div>
                        
                        <!-- 个人习惯 -->
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h5 class="font-medium text-gray-800">个人习惯</h5>
                                    <p class="text-xs text-gray-500 mt-1">应询问吸烟、饮酒、生活作息等</p>
                                </div>
                                <span class="text-red-500 font-bold">0/5分</span>
                            </div>
                            <div class="bg-red-50 p-2 rounded text-xs text-gray-700">
                                <i class="fas fa-times-circle mr-1 text-red-500"></i>
                                评价：未询问患者个人习惯相关内容
                            </div>
                        </div>
                        
                        <!-- 家族史 -->
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h5 class="font-medium text-gray-800">家族史</h5>
                                    <p class="text-xs text-gray-500 mt-1">应询问遗传性疾病、肿瘤史等</p>
                                </div>
                                <span class="text-red-500 font-bold">0/4分</span>
                            </div>
                            <div class="bg-red-50 p-2 rounded text-xs text-gray-700">
                                <i class="fas fa-times-circle mr-1 text-red-500"></i>
                                评价：未询问患者家族史相关内容
                            </div>
                        </div>
                        
                        <!-- 婚姻史 -->
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h5 class="font-medium text-gray-800">婚姻史</h5>
                                    <p class="text-xs text-gray-500 mt-1">应了解婚姻状况、配偶健康等</p>
                                </div>
                                <span class="text-red-500 font-bold">0/4分</span>
                            </div>
                            <div class="bg-red-50 p-2 rounded text-xs text-gray-700">
                                <i class="fas fa-times-circle mr-1 text-red-500"></i>
                                评价：未询问患者婚姻史相关内容
                            </div>
                        </div>
                        
                        <!-- 月经史及生育史 -->
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h5 class="font-medium text-gray-800">月经史及生育史</h5>
                                    <p class="text-xs text-gray-500 mt-1">女性患者应询问月经、生育情况</p>
                                </div>
                                <span class="text-green-500 font-bold">4/4分</span>
                            </div>
                            <div class="bg-green-50 p-2 rounded text-xs text-gray-700">
                                <i class="fas fa-check-circle mr-1 text-green-500"></i>
                                评价：患者为男性，此项不适用，不扣分
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 问诊技巧 -->
            <div class="bg-white rounded-xl shadow hover-shadow overflow-hidden">
                <button onclick="toggleAccordion('wenzenjiqiao')" class="w-full p-4 text-left flex items-center justify-between hover-scale">
                    <div class="flex items-center">
                        <i class="fas fa-comments text-purple-500 mr-3"></i>
                        <span class="font-semibold text-gray-800">问诊技巧</span>
                    </div>
                    <div class="flex items-center">
                        <span class="text-sm font-medium text-gray-600 mr-3">0/10分 (0%)</span>
                        <i class="fas fa-chevron-down text-gray-400 transition-transform" id="wenzenjiqiao-icon"></i>
                    </div>
                </button>
                <div id="wenzenjiqiao" class="hidden px-4 pb-4">
                    <div class="bg-purple-50 p-3 rounded-lg mb-3">
                        <p class="text-xs text-purple-700">
                            <i class="fas fa-info-circle mr-1"></i>
                            评分标准：评估医生的沟通能力、提问技巧和职业素养
                        </p>
                    </div>
                    <div class="space-y-3">
                        <!-- 初始交流 -->
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h5 class="font-medium text-gray-800">初始交流</h5>
                                    <p class="text-xs text-gray-500 mt-1">应进行自我介绍、询问基本信息</p>
                                </div>
                                <span class="text-red-500 font-bold">0/2.5分</span>
                            </div>
                            <div class="bg-red-50 p-2 rounded text-xs text-gray-700">
                                <i class="fas fa-times-circle mr-1 text-red-500"></i>
                                评价：未进行自我介绍，也未询问患者基本信息
                            </div>
                        </div>
                        
                        <!-- 语言表达 -->
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h5 class="font-medium text-gray-800">语言表达</h5>
                                    <p class="text-xs text-gray-500 mt-1">应使用清晰、准确、易懂的语言</p>
                                </div>
                                <span class="text-red-500 font-bold">0/2.5分</span>
                            </div>
                            <div class="bg-red-50 p-2 rounded text-xs text-gray-700">
                                <i class="fas fa-times-circle mr-1 text-red-500"></i>
                                评价：未进行有效提问，语言表达不清晰
                            </div>
                        </div>
                        
                        <!-- 沟通技巧 -->
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h5 class="font-medium text-gray-800">沟通技巧</h5>
                                    <p class="text-xs text-gray-500 mt-1">应善于引导、倾听、回应患者</p>
                                </div>
                                <span class="text-red-500 font-bold">0/2.5分</span>
                            </div>
                            <div class="bg-red-50 p-2 rounded text-xs text-gray-700">
                                <i class="fas fa-times-circle mr-1 text-red-500"></i>
                                评价：未引导患者提供有效信息，缺乏沟通技巧
                            </div>
                        </div>
                        
                        <!-- 尊重与同理心 -->
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h5 class="font-medium text-gray-800">尊重与同理心</h5>
                                    <p class="text-xs text-gray-500 mt-1">应体现对患者的尊重和理解</p>
                                </div>
                                <span class="text-red-500 font-bold">0/2.5分</span>
                            </div>
                            <div class="bg-red-50 p-2 rounded text-xs text-gray-700">
                                <i class="fas fa-times-circle mr-1 text-red-500"></i>
                                评价：未展现出对患者的尊重和同理心
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 人文关怀 -->
            <div class="bg-white rounded-xl shadow hover-shadow overflow-hidden">
                <button onclick="toggleAccordion('renwenguanhuai')" class="w-full p-4 text-left flex items-center justify-between hover-scale">
                    <div class="flex items-center">
                        <i class="fas fa-heart text-red-500 mr-3"></i>
                        <span class="font-semibold text-gray-800">人文关怀</span>
                    </div>
                    <div class="flex items-center">
                        <span class="text-sm font-medium text-gray-600 mr-3">0/5分 (0%)</span>
                        <i class="fas fa-chevron-down text-gray-400 transition-transform" id="renwenguanhuai-icon"></i>
                    </div>
                </button>
                <div id="renwenguanhuai" class="hidden px-4 pb-4">
                    <div class="bg-red-50 p-3 rounded-lg mb-3">
                        <p class="text-xs text-red-700">
                            <i class="fas fa-info-circle mr-1"></i>
                            评分标准：评估医生对患者的情感支持和人文关怀
                        </p>
                    </div>
                    <div class="space-y-3">
                        <!-- 患者境遇的同情与鼓励 -->
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h5 class="font-medium text-gray-800">患者境遇的同情与鼓励</h5>
                                    <p class="text-xs text-gray-500 mt-1">应表达对患者处境的理解和支持</p>
                                </div>
                                <span class="text-red-500 font-bold">0/2.5分</span>
                            </div>
                            <div class="bg-red-50 p-2 rounded text-xs text-gray-700">
                                <i class="fas fa-times-circle mr-1 text-red-500"></i>
                                评价：未询问患者感受，缺乏对患者术后化疗和发热困境的关怀
                            </div>
                        </div>
                        
                        <!-- 专业沟通与初步沟通 -->
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h5 class="font-medium text-gray-800">专业沟通与初步沟通</h5>
                                    <p class="text-xs text-gray-500 mt-1">应提供专业解释和建议</p>
                                </div>
                                <span class="text-red-500 font-bold">0/2.5分</span>
                            </div>
                            <div class="bg-red-50 p-2 rounded text-xs text-gray-700">
                                <i class="fas fa-times-circle mr-1 text-red-500"></i>
                                评价：未进行专业沟通，未对发热原因和治疗方案进行初步解释
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 问诊逻辑 -->
            <div class="bg-white rounded-xl shadow hover-shadow overflow-hidden">
                <button onclick="toggleAccordion('wenzhenluoji')" class="w-full p-4 text-left flex items-center justify-between hover-scale">
                    <div class="flex items-center">
                        <i class="fas fa-brain text-yellow-500 mr-3"></i>
                        <span class="font-semibold text-gray-800">问诊逻辑</span>
                    </div>
                    <div class="flex items-center">
                        <span class="text-sm font-medium text-gray-600 mr-3">0/10分 (0%)</span>
                        <i class="fas fa-chevron-down text-gray-400 transition-transform" id="wenzhenluoji-icon"></i>
                    </div>
                </button>
                <div id="wenzhenluoji" class="hidden px-4 pb-4">
                    <div class="bg-yellow-50 p-3 rounded-lg mb-3">
                        <p class="text-xs text-yellow-700">
                            <i class="fas fa-info-circle mr-1"></i>
                            评分标准：评估问诊的逻辑性、系统性和完整性
                        </p>
                    </div>
                    <div class="space-y-3">
                        <!-- 问诊内容的完整性 -->
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h5 class="font-medium text-gray-800">问诊内容的完整性</h5>
                                    <p class="text-xs text-gray-500 mt-1">应覆盖所有必要的病史内容</p>
                                </div>
                                <span class="text-red-500 font-bold">0/2.5分</span>
                            </div>
                            <div class="bg-red-50 p-2 rounded text-xs text-gray-700">
                                <i class="fas fa-times-circle mr-1 text-red-500"></i>
                                评价：医生未询问任何病史信息，未能覆盖主诉、现病史、既往史、个人史、家族史等内容
                            </div>
                        </div>
                        
                        <!-- 问诊顺序合理 -->
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h5 class="font-medium text-gray-800">问诊顺序合理</h5>
                                    <p class="text-xs text-gray-500 mt-1">应按照逻辑顺序进行问诊</p>
                                </div>
                                <span class="text-red-500 font-bold">0/2.5分</span>
                            </div>
                            <div class="bg-red-50 p-2 rounded text-xs text-gray-700">
                                <i class="fas fa-times-circle mr-1 text-red-500"></i>
                                评价：医生未进行任何问诊，未能按照逻辑顺序询问病史信息
                            </div>
                        </div>
                        
                        <!-- 问题的相关性和适当性 -->
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h5 class="font-medium text-gray-800">问题的相关性和适当性</h5>
                                    <p class="text-xs text-gray-500 mt-1">提问应与主诉相关且适当</p>
                                </div>
                                <span class="text-red-500 font-bold">0/2.5分</span>
                            </div>
                            <div class="bg-red-50 p-2 rounded text-xs text-gray-700">
                                <i class="fas fa-times-circle mr-1 text-red-500"></i>
                                评价：医生未提出任何问题，未能获取与主诉和病史相关的信息
                            </div>
                        </div>
                        
                        <!-- 问诊过程流畅 -->
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h5 class="font-medium text-gray-800">问诊过程流畅</h5>
                                    <p class="text-xs text-gray-500 mt-1">问诊应自然流畅，有连贯性</p>
                                </div>
                                <span class="text-red-500 font-bold">0/2.5分</span>
                            </div>
                            <div class="bg-red-50 p-2 rounded text-xs text-gray-700">
                                <i class="fas fa-times-circle mr-1 text-red-500"></i>
                                评价：医生未进行任何问诊，未能体现问诊过程的流畅性
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 改进建议按钮 -->
        <div class="mt-6 mb-6">
            <button onclick="showSuggestions()" class="w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-4 rounded-xl font-semibold hover-scale shadow-lg">
                <i class="fas fa-lightbulb mr-2"></i>
                查看改进建议
            </button>
        </div>
        
        <!-- 改进建议模态框 -->
        <div id="suggestionsModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
            <div class="bg-white rounded-2xl max-w-md w-full max-h-[80vh] overflow-y-auto">
                <div class="sticky top-0 bg-white p-4 border-b border-gray-200">
                    <div class="flex items-center justify-between">
                        <h3 class="text-lg font-semibold text-gray-800">
                            <i class="fas fa-lightbulb text-yellow-500 mr-2"></i>
                            改进建议
                        </h3>
                        <button onclick="closeSuggestions()" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                </div>
                <div class="p-4 space-y-4">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="font-medium text-blue-800 mb-2">
                            <i class="fas fa-info-circle mr-1"></i>
                            重点改进方向
                        </h4>
                        <ul class="text-sm text-blue-700 space-y-1">
                            <li>• 建立完整的问诊框架和流程</li>
                            <li>• 加强医患沟通技巧训练</li>
                            <li>• 培养人文关怀意识</li>
                            <li>• 提升问诊逻辑性和系统性</li>
                        </ul>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="border-l-4 border-orange-500 pl-4">
                            <h5 class="font-medium text-gray-800">现病史改进</h5>
                            <p class="text-sm text-gray-600 mt-1">
                                系统询问症状的OLDCARTS特征：起病(Onset)、部位(Location)、持续时间(Duration)、性质(Character)、加重/缓解因素(Aggravating/Relieving)、放射(Radiation)、时间规律(Timing)、严重程度(Severity)
                            </p>
                        </div>
                        <div class="border-l-4 border-green-500 pl-4">
                            <h5 class="font-medium text-gray-800">病史采集改进</h5>
                            <p class="text-sm text-gray-600 mt-1">
                                养成全面询问习惯：既往病史、手术史、过敏史、个人史（烟酒嗜好）、家族史、婚育史等，这些信息对诊断和治疗都有重要参考价值
                            </p>
                        </div>
                        
                        <div class="border-l-4 border-purple-500 pl-4">
                            <h5 class="font-medium text-gray-800">沟通技巧提升</h5>
                            <p class="text-sm text-gray-600 mt-1">
                                开始时自我介绍，使用开放式提问引导患者表达，适时总结和确认信息，避免医学术语，确保患者理解
                            </p>
                        </div>
                        
                        <div class="border-l-4 border-red-500 pl-4">
                            <h5 class="font-medium text-gray-800">人文关怀培养</h5>
                            <p class="text-sm text-gray-600 mt-1">
                                关注患者情绪，表达同理心，对患者的痛苦表示理解，适当给予鼓励和支持，特别是对化疗患者更需要情感支持
                            </p>
                        </div>
                        
                        <div class="border-l-4 border-yellow-500 pl-4">
                            <h5 class="font-medium text-gray-800">问诊逻辑优化</h5>
                            <p class="text-sm text-gray-600 mt-1">
                                按照主诉→现病史→既往史→个人史→家族史的顺序进行，确保问题之间有逻辑联系，避免跳跃式提问
                            </p>
                        </div>
                    </div>
                    
                    <div class="bg-gray-100 p-4 rounded-lg">
                        <h4 class="font-medium text-gray-800 mb-2">
                            <i class="fas fa-book mr-1"></i>
                            推荐学习资源
                        </h4>
                        <ul class="text-sm text-gray-600 space-y-1">
                            <li>• 《临床问诊技巧》教材</li>
                            <li>• 医患沟通技巧培训课程</li>
                            <li>• 标准化病人(SP)实践训练</li>
                            <li>• 优秀问诊案例视频学习</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 底部操作栏 -->
        <div class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4">
            <div class="flex gap-3">
                <button class="flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover-scale">
                    <i class="fas fa-download mr-2"></i>
                    下载报告
                </button>
                <button class="flex-1 bg-blue-600 text-white py-3 rounded-lg font-medium hover-scale">
                    <i class="fas fa-share-alt mr-2"></i>
                    分享结果
                </button>
            </div>
        </div>
    </div>
    
    <script>
        // 雷达图配置
        const ctx = document.getElementById('radarChart').getContext('2d');
        const radarChart = new Chart(ctx, {
            type: 'radar',
            data: {
                labels: ['现病史', '问诊逻辑', '其他病史', '人文关怀', '问诊技巧'],
                datasets: [{
                    label: '得分率',
                    data: [42, 0, 16, 0, 0], // 转换为百分比
                    backgroundColor: 'rgba(147, 51, 234, 0.2)',
                    borderColor: 'rgba(147, 51, 234, 1)',
                    borderWidth: 2,
                    pointBackgroundColor: 'rgba(147, 51, 234, 1)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgba(147, 51, 234, 1)'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 100,
                        ticks: {
                            stepSize: 20,
                            callback: function(value) {
                                return value + '%';
                            }
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.1)'
                        },
                        angleLines: {
                            color: 'rgba(0, 0, 0, 0.1)'
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': ' + context.parsed.r + '%';
                            }
                        }
                    }
                }
            }
        });
        
        // 折叠面板控制
        function toggleAccordion(id) {
            const content = document.getElementById(id);
            const icon = document.getElementById(id + '-icon');
            
            // 关闭其他已打开的面板
            const allAccordions = ['xianbingshi', 'qitabingshi', 'wenzenjiqiao', 'renwenguanhuai', 'wenzhenluoji'];
            allAccordions.forEach(accordionId => {
                if (accordionId !== id) {
                    const otherContent = document.getElementById(accordionId);
                    const otherIcon = document.getElementById(accordionId + '-icon');
                    if (otherContent && !otherContent.classList.contains('hidden')) {
                        otherContent.classList.add('hidden');
                        otherIcon.style.transform = 'rotate(0deg)';
                    }
                }
            });
            
            // 切换当前面板
            if (content.classList.contains('hidden')) {
                content.classList.remove('hidden');
                icon.style.transform = 'rotate(180deg)';
                // 平滑滚动到当前面板
                setTimeout(() => {
                    content.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                }, 100);
            } else {
                content.classList.add('hidden');
                icon.style.transform = 'rotate(0deg)';
            }
        }
        
        // 显示改进建议
        function showSuggestions() {
            document.getElementById('suggestionsModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }
        
        // 关闭改进建议
        function closeSuggestions() {
            document.getElementById('suggestionsModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }
        
        // 点击模态框外部关闭
        document.getElementById('suggestionsModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeSuggestions();
            }
        });
        
        // 页面加载动画
        window.addEventListener('load', function() {
            // 圆环进度动画
            setTimeout(() => {
                const circle = document.querySelector('circle[stroke="#ef4444"]');
                if (circle) {
                    // 计算偏移量：总长度 * (1 - 得分百分比)
                    const offset = 351.86 * (1 - 0.25);
                    circle.style.strokeDashoffset = offset.toString();
                }
            }, 500);
            
            // 数字递增动画
            animateValue('totalScore', 0, 25, 1000);
        });
        
        // 数字递增动画函数
        function animateValue(id, start, end, duration) {
            const obj = document.getElementById(id);
            if (!obj) return;
            
            const range = end - start;
            const minTimer = 50;
            let stepTime = Math.abs(Math.floor(duration / range));
            stepTime = Math.max(stepTime, minTimer);
            
            const startTime = new Date().getTime();
            const endTime = startTime + duration;
            let timer;
            
            function run() {
                const now = new Date().getTime();
                const remaining = Math.max((endTime - now) / duration, 0);
                const value = Math.round(end - (remaining * range));
                obj.innerHTML = value;
                if (value == end) {
                    clearInterval(timer);
                }
            }
            
            timer = setInterval(run, stepTime);
            run();
        }
        
        // 添加触摸反馈
        document.querySelectorAll('.hover-scale').forEach(element => {
            element.addEventListener('touchstart', function() {
                this.style.transform = 'scale(0.95)';
            });
            element.addEventListener('touchend', function() {
                this.style.transform = 'scale(1)';
            });
        });
        
        // 防止iOS橡皮筋效果
        document.body.addEventListener('touchmove', function(e) {
            if (e.target.closest('#suggestionsModal')) {
                return;
            }
            if (document.body.scrollHeight <= window.innerHeight) {
                e.preventDefault();
            }
        }, { passive: false });
    </script>
</body>
</html>
